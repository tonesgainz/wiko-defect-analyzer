# Wiko Defect Analyzer - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control

# ============================================================================
# CRITICAL: Azure AI Configuration (REQUIRED FOR MODEL TO WORK)
# ============================================================================
# Get these from Azure AI Foundry Portal: https://ai.azure.com
#
# Setup Instructions:
# 1. Go to https://ai.azure.com and sign in with your Azure account
# 2. Create a new project (or select existing one)
# 3. Deploy GPT-5.2 model (or GPT-4.1 as alternative)
# 4. Copy the endpoint URL and API key from the deployment page
# 5. Update the values below
#
# IMPORTANT: The model will NOT work without valid credentials!

# Azure AI Project endpoint (format: https://[project].api.azureml.ms)
# Example: https://wiko-ai-eastus2.api.azureml.ms
AZURE_AI_PROJECT_ENDPOINT=""

# Azure AI API Key (get from Azure portal under "Keys and Endpoint")
# This is a long string like: 1a2b3c4d5e6f7g8h9i0j...
AZURE_AI_API_KEY=""

# Azure OpenAI API version (do not change unless instructed)
AZURE_OPENAI_API_VERSION=2025-04-01-preview

# ============================================================================
# Model Deployments
# ============================================================================
# Deployment names you created in Azure AI Foundry

# Vision & Classification model (GPT-5.2 or GPT-4o)
AZURE_VISION_DEPLOYMENT=gpt-5-2

# Reasoning model for RCA (GPT-5.2 or o3-mini)
AZURE_REASONING_DEPLOYMENT=gpt-5-2

# Reports model (GPT-5.2-chat or GPT-4o-mini)
AZURE_REPORTS_DEPLOYMENT=gpt-5-2-chat

# ============================================================================
# Reasoning Configuration (GPT-5.2 specific)
# ============================================================================
# Options: none, minimal, low, medium, high, xhigh
DEFAULT_REASONING_EFFORT=high
RCA_REASONING_EFFORT=xhigh

# Options: low, medium, high
DEFAULT_VERBOSITY=medium

# ============================================================================
# Application Configuration
# ============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Flask configuration
FLASK_APP=app.py
FLASK_DEBUG=1
PORT=5001

# CORS allowed origins (comma-separated, use * for development only)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# Security Configuration (REQUIRED FOR PRODUCTION)
# ============================================================================

# API key for authentication
# Generate a strong random key with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Leave empty in development to disable authentication
# MUST be set in production!
API_KEY=

# JWT secret for token signing (generate with: openssl rand -hex 32)
JWT_SECRET=

# Session secret key (generate with: python -c "import secrets; print(secrets.token_hex(32))")
SECRET_KEY=dev-secret-change-in-production

# ============================================================================
# Rate Limiting
# ============================================================================

# Requests per minute per IP
RATE_LIMIT_PER_IP=60

# Requests per minute per API key
RATE_LIMIT_PER_KEY=300

# ============================================================================
# Database Configuration (if using)
# ============================================================================

# Database URL (PostgreSQL, MySQL, or SQLite)
DATABASE_URL=sqlite:///wiko_defect_analyzer.db

# Azure Cosmos DB (alternative)
# COSMOS_DB_ENDPOINT=https://your-cosmos.documents.azure.com:443/
# COSMOS_DB_KEY=your-cosmos-key

# ============================================================================
# Redis Configuration (for caching and rate limiting)
# ============================================================================

# Redis URL (local or Azure Redis Cache)
REDIS_URL=redis://localhost:6379/0

# Cache TTL in seconds
CACHE_TTL=3600

# ============================================================================
# Storage Configuration
# ============================================================================

# Azure Blob Storage (for storing images if needed)
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;...
# AZURE_STORAGE_CONTAINER=defect-images

# ============================================================================
# Monitoring & Logging
# ============================================================================

# Azure Application Insights connection string
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...;...

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable structured JSON logging
JSON_LOGGING=true

# Sentry DSN (for error tracking)
# SENTRY_DSN=https://your-sentry-dsn

# ============================================================================
# Feature Flags
# ============================================================================

# Enable/disable batch processing
ENABLE_BATCH_PROCESSING=true

# Enable/disable shift reports
ENABLE_SHIFT_REPORTS=true

# Maximum batch size
MAX_BATCH_SIZE=50

# ============================================================================
# Performance Tuning
# ============================================================================

# Maximum image file size in MB
MAX_IMAGE_SIZE_MB=16

# Resize images larger than this (in pixels)
MAX_IMAGE_DIMENSION=4096

# Azure API timeout in seconds
AZURE_API_TIMEOUT=30

# ============================================================================
# Production Settings (only for production environment)
# ============================================================================

# Set to true in production
# PRODUCTION_MODE=true

# Enable HTTPS redirect
# FORCE_HTTPS=true

# Content Security Policy
# CSP_POLICY=default-src 'self'; img-src 'self' data:;
